# 双锋对决项目结构说明

## 项目概述
"双锋对决" 是一款使用HTML5+JavaScript编写的2D横版双人格斗类网页游戏，支持用户登录、数据持久化和在线排行榜功能。

## 项目目录结构

```
双锋对决/
├── index.html                 # 项目主入口页面
├── favicon.ico                # 网站图标
├── assets/                    # 静态资源目录
│   ├── images/                # 图片资源
│   │   ├── characters/        # 角色图片
│   │   ├── backgrounds/       # 背景图片
│   │   ├── effects/           # 特效图片
│   │   ├── logo.png           # 游戏Logo
│   │   ├── mainImage.mp4      # 主界面背景视频
│   │   ├── mageVictory.mp4    # 法师胜利动画
│   │   └── mechanician.mp4    # 机械师胜利动画
│   └── sounds/                # 音频资源
│       ├── bgm/               # 背景音乐
│       ├── effects/           # 音效
│       │   ├── mainMusic.mp3  # 主菜单背景音乐
│       │   └── click.mp3      # 点击音效
│       └── characters/        # 角色音效
├── database/                  # 数据库相关文件
├── docs/                      # 项目文档
├── pages/                     # HTML页面
├── scripts/                   # JavaScript脚本
└── styles/                    # CSS样式文件
```

## 主要文件说明

### 入口文件
- `index.html`: 项目主入口页面，提供游戏各模块的导航

### HTML页面 (pages/)
- `game.html`: 游戏主界面，包含地图选择和游戏逻辑
- `login.html`: 用户登录页面，支持注册和游客模式
- `selectMap.html`: 地图选择页面（新版地图选择已集成到game.html）
- `leaderboard.html`: 排行榜页面
- `init-database.html`: 数据库初始化页面

### JavaScript脚本 (scripts/)
- `control.js`: 游戏核心逻辑和控制
- `jquery.min.js`: jQuery库
- `game-data-manager.js`: 游戏数据管理
- `game-integration.js`: 游戏数据集成
- `supabase.js`: Supabase数据库连接

### 样式文件 (styles/)
- `new.css`: 游戏主界面样式
- `cover.css`: 主页样式

### 静态资源 (assets/)
- `images/`: 图片资源
  - `characters/`: 角色图片（法师、机械师等）
  - `backgrounds/`: 背景图片
  - `effects/`: 特效图片（火焰、护盾等）
- `sounds/`: 音频资源
  - `bgm/`: 背景音乐
  - `effects/`: 音效
  - `characters/`: 角色音效

### 数据库文件 (database/)
- `database_init.sql`: 数据库初始化脚本

### 文档 (docs/)
- `README.md`: 项目说明文档
- `项目文件功能说明.md`: 详细的文件功能说明
- `参考代码.md`: 参考代码文档
- `SUPABASE_SETUP.md`: Supabase数据库设置说明

## 游戏特性
- **双人对战**: 支持两个玩家在同一设备上进行对战
- **多角色选择**: 法师和机械师两个独特角色，各有不同技能
- **多样化地图**: 6个不同主题的地图（城镇广场、峭壁之战、地下矿井、天空之城、火山熔岩、冰雪要塞）
- **三局两胜制**: 采用经典的三局两胜决斗机制
- **技能系统**: 每个角色拥有4个技能，包括基础攻击和终极技能
- **能量系统**: 通过攻击积累能量，释放终极技能
- **护盾系统**: 防御机制，可以吸收伤害
- **医疗道具**: 战场中出现医疗包和医疗瓶，可恢复生命值
- **音效系统**: 丰富的背景音乐和角色音效
- **视频背景**: 主界面和胜利动画使用视频背景增强视觉效果

## 技术栈
- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **库**: jQuery 3.x
- **后端服务**: Supabase (用户认证、数据存储)
- **音频**: HTML5 Audio API
- **视频**: HTML5 Video API
- **响应式设计**: CSS Flexbox, Media Queries

## 使用说明
1. 启动本地服务器后访问 `index.html` 进入游戏主页面
2. 点击"START"按钮进入登录界面
3. 登录或选择游客模式进入游戏
4. 在游戏主菜单中选择地图开始对战
5. 游戏结束后可查看排行榜（需要登录账号）
6. 首次使用需要运行数据库初始化页面

## 游戏控制
### 法师玩家（左侧）
- **移动**: A（左）D（右）W（跳跃）
- **基础攻击**: B
- **护盾**: C（生成400点护盾值）
- **囚禁**: X（禁锢对手2秒）
- **火球术**: 按住V蓄力，松开发射（伤害随蓄力增加）
- **召唤仆从**: Q（能量满时）

### 机械师玩家（右侧）
- **移动**: 左右方向键移动，上方向键跳跃
- **近战攻击**: ,
- **闪烁**: .（向前闪现180像素）
- **狂暴模式**: M（提升攻击力但损失20%生命值）
- **手榴弹**: 按住>蓄力，松开发射（射程随蓄力增加）
- **机器人大军**: L（能量满时）

## 部署说明
1. **本地运行**:
   ```bash
   # 使用Node.js的http-server
   npx http-server -p 8000
   # 然后访问 http://localhost:8000
   ```

2. **GitHub Pages部署**:
   - 将代码推送到GitHub仓库
   - 在仓库设置中启用GitHub Pages
   - 选择main分支作为源

3. **注意事项**:
   - 游戏需要HTTPS环境才能正常使用Supabase功能
   - 某些浏览器可能需要用户交互后才能播放音频

## 更新历史
- **v1.0**: 基础游戏功能实现
- **v1.1**: 添加用户登录系统和数据持久化
- **v1.2**: 优化游戏界面，添加视频背景
- **v1.3**: 完善地图选择界面和音效系统
- **v1.4**: 当前版本，包含完整的游戏功能和用户体验优化